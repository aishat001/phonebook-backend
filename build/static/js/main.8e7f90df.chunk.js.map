{"version":3,"sources":["component/notification/Notification.js","component/person/Person.js","component/personform/PersonForm.js","component/search/Search.js","services/person.js","App.js","index.js"],"names":["Notification","message","className","Person","name","number","deletePerson","id","type","onClick","PersonForm","addName","newName","handleNewName","newNumber","handleNewNumber","onSubmit","value","onChange","Search","searchForPerson","setfilteredNames","searchName","filteredNames","handleSearchName","numbersToShow","console","log","baseUrl","exportObject","getAll","axios","get","then","res","data","create","personObject","post","remove","delete","update","updateNumber","put","App","useState","persons","setpersons","setnewName","setNewNumber","setSearchName","errorMessage","setErrorMessage","useEffect","personService","initial","catch","error","filter","person","toLowerCase","includes","e","target","preventDefault","existingPerson","find","window","confirm","updatedPerson","map","length","Math","max","addNewPerson","concat","filteredName","newPersons","returnedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8e7f90df.chunk.js","sourcesContent":["const Notification = ({message}) => {\r\n    return ( \r\n        <div className=\"error\">\r\n            {message}\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Notification;","import React from \"react\";\r\n\r\nconst Person = ({name, number, deletePerson}) => {\r\n    \r\n    return ( \r\n        <div>\r\n            <p key={name.id}>{name} {number}</p>\r\n            <button type=\"button\" onClick={deletePerson} >delete</button>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Person;","\r\nconst  PersonForm= ({addName, newName, handleNewName, newNumber, handleNewNumber}) => {\r\n    return ( \r\n        <form onSubmit={addName} >\r\n        <div>\r\n          name: <input value={newName} onChange={handleNewName}/>\r\n          <p>{}</p>\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={handleNewNumber}/>\r\n          <p>{}</p>\r\n\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n     );\r\n    }\r\n    \r\nexport default PersonForm;","// import Person from \"../person/Person\";\r\n\r\nconst Search = ({searchForPerson, setfilteredNames, searchName, filteredNames, handleSearchName, numbersToShow}) => {\r\n    console.log();\r\n    return ( \r\n        <div>\r\n        <form onSubmit={searchForPerson}>\r\n        filter shown with <input value={searchName} onChange={handleSearchName} onClick={() => setfilteredNames(!filteredNames)}/>        \r\n        </form>\r\n\r\n\r\n \r\n\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Search;","import axios from \"axios\";\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n   const request = axios.get(baseUrl)\r\n    return request.then(res => res.data) \r\n}\r\n\r\nconst create = (personObject) => {\r\n   const request = axios.post(baseUrl, personObject)\r\n    return request.then(res => res.data) \r\n}\r\n\r\nconst remove = id => axios.delete(`${baseUrl}/${id}`);\r\n\r\nconst update = (id, updateNumber) => {\r\n   const request = axios.put(`${baseUrl}/${id}`, updateNumber)\r\n    return request.then(res => res.data) \r\n}\r\n\r\nconst exportObject = { getAll, create, remove, update }\r\nexport default exportObject;\r\n","import { useEffect, useState } from 'react';\r\nimport './App.css';\r\nimport Notification from './component/notification/Notification';\r\nimport Person from './component/person/Person';\r\nimport PersonForm from './component/personform/PersonForm';\r\nimport Search from './component/search/Search';\r\nimport personService from './services/person';\r\n// import Search from './component/search/Search';\r\n\r\n\r\nconst App = () => {\r\n  const [persons, setpersons] = useState([]);\r\n  const [newName, setnewName] = useState('');\r\n  const [newNumber, setNewNumber] = useState('');\r\n  const [searchName, setSearchName] = useState('');\r\n  const [filteredNames, setfilteredNames] = useState(true);\r\n  const [errorMessage, setErrorMessage] = useState();\r\n\r\nuseEffect(() => {\r\n  personService\r\n    .getAll()\r\n    .then(initial => {\r\n      console.log(initial)\r\n      setpersons(initial)\r\n    })\r\n    .catch(error => {\r\n      return console.log('api does not exist');\r\n    })\r\n}, []);\r\n\r\n  const addName = (e) => {\r\n    e.preventDefault();\r\n\r\n    //  if name already exist *********\r\n   \r\n      const existingPerson = persons.find(person => person.name.toLowerCase() === newName)   \r\n      if (existingPerson) {\r\n      // update numeber if name exist\r\n      const willUpdate =  window.confirm(`${existingPerson.name} is already added to phonebook, replace the old number with a new one?`) \r\n      if (willUpdate) {\r\n        const updatedPerson =  { ...existingPerson, number : newNumber}\r\n        \r\n        return personService\r\n            .update(existingPerson.id, updatedPerson)\r\n          .then(res => {\r\n            console.log(res);\r\n            console.log(newNumber);\r\n            setpersons(persons.map(person => person.id === existingPerson.id ? person : res))\r\n  \r\n          })\r\n          .catch(error => {\r\n            setErrorMessage('not updated, check your log for the problem')\r\n          })   \r\n\r\n        }\r\n      }\r\n\r\n        else {\r\n\r\n          const generateId = () => {\r\n            const maxId = persons.length > 0 ? Math.max(...persons.map(person => person.id)) : 0\r\n            return maxId + 1\r\n        }\r\n          const personObject = {\r\n            id: generateId(),\r\n            name: newName,\r\n            number: newNumber\r\n          }\r\n           \r\n          personService\r\n          .create(personObject)\r\n          .then(addNewPerson => {\r\n            console.log(addNewPerson)\r\n            setpersons(persons.concat(personObject))\r\n            setnewName('');\r\n            setNewNumber(''); \r\n          })\r\n      \r\n        }\r\n };\r\n\r\n//  get name from input ************\r\n  const handleNewName = (e) => {\r\n   setnewName(e.target.value);\r\n   console.log(newName);\r\n }\r\n\r\n//  getNumber from input ******\r\n  const handleNewNumber = (e) => {\r\n   setNewNumber(e.target.value);\r\n   console.log(newName);\r\n };\r\n  const  handleSearchName = (e) => {\r\n    setSearchName(e.target.value);\r\n };\r\n\r\n const numbersToShow = filteredNames ?  persons : persons.filter((person) => person.name.toLowerCase().includes(searchName) === true);\r\n\r\n//  search names\r\n const  searchForPerson = (e) => {\r\n  e.preventDefault();\r\n    console.log(numbersToShow);\r\n    console.log(setpersons(numbersToShow));\r\n }\r\n\r\n\r\n\r\n const deletePerson = (id) => {\r\n   console.log(id);\r\n    const newPersons = persons.filter(person => person.id !== id)\r\n\r\n   personService\r\n    .remove(id, newPersons)\r\n   .then(returnedPerson => {\r\n          console.log(returnedPerson)\r\n          setpersons(newPersons)\r\n         // returnedPerson.status(204).end()\r\n        })\r\n }\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <h2>Phonebook</h2>\r\n      <Notification message={errorMessage}/>\r\n      <Search filteredNames={filteredNames} numbersToShow={numbersToShow} handleSearchName={handleSearchName} searchForPerson={searchForPerson} setfilteredNames={setfilteredNames}/>\r\n      \r\n      <h2>Add a new</h2>\r\n      <PersonForm addName={addName} newNumber={newNumber} newName={newName} handleNewName={handleNewName} handleNewNumber={handleNewNumber}/>\r\n\r\n      <h2>Numbers</h2>\r\n          {numbersToShow.map(filteredName => \r\n      <Person key={filteredName.id} deletePerson={() => deletePerson(filteredName.id)} name={filteredName.name} number={filteredName.number}/>\r\n        \r\n        )}  \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}